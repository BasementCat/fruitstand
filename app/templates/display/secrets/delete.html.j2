{% extends "base.html.j2" %}
{% import "bootstrap/wtf.html" as wtf %}

{% set title = 'Delete Secret: ' ~ secret.name %}

{% block main_container %}
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                {% if secret.displays |length %}
                    <div class="alert alert-danger">
                        The secret "{{ secret.name }}" is used by {{ secret.displays |length |plural('display') }}
                        - deleting it will disable them until they are updated to send a new secret.
                    </div>
                    <h3>Displays:</h3>
                    <ul>
                        {% for d in secret.displays %}
                            <li>{{ d.name }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <div class="alert alert-info">
                        The secret "{{ secret.name }}" is not used by any displays, and can be safely deleted.
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-3 col-md-2">
                <a class="btn btn-default btn-block" href="{{ url_for('.secret_list') }}">Cancel</a>
            </div>
            <div class="col-xs-12 col-sm-3 col-sm-offset-6 col-md-2 col-md-offset-8">
                <form class="form-inline" method="POST">
                    <button type="submit" class="btn btn-danger btn-block">Delete</button>
                </form>
            </div>
        </div>
{% endblock %}